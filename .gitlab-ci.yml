stages:
  - build
  - test

build-core:
  stage: build
  script:
    - cargo build --features nogc
    - cargo build --features semispace
    - cargo build --features nogc,sanity
    - cargo build --features semispace,sanity

build-dummyvm:
  stage: build
  script:
    - cargo build --manifest-path vmbindings/dummyvm/Cargo.toml --features nogc
    - cargo build --manifest-path vmbindings/dummyvm/Cargo.toml --features semispace

cargo-test:
  stage: test
  script:
    - cargo +nightly test --features nogc

alloc-test:
  stage: test
  script:
    - cd examples
    - ./build.py
