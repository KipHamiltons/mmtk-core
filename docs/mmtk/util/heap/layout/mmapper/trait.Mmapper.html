<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Generic mmap and protection functionality"><meta name="keywords" content="rust, rustlang, rust-lang, Mmapper"><title>Mmapper in mmtk::util::heap::layout::mmapper - Rust</title><link rel="stylesheet" type="text/css" href="../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../../ayu.css" disabled ><script id="default-settings"></script><script src="../../../../../storage.js"></script><script src="../../../../../crates.js"></script><noscript><link rel="stylesheet" href="../../../../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../../../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../../../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../../../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../../../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../../../mmtk/index.html'><div class='logo-container rust-logo'><img src='../../../../../rust-logo.png' alt='logo'></div></a><p class="location">Trait Mmapper</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.eagerly_mmap_all_spaces">eagerly_mmap_all_spaces</a><a href="#tymethod.ensure_mapped">ensure_mapped</a><a href="#tymethod.is_mapped_address">is_mapped_address</a><a href="#tymethod.mark_as_mapped">mark_as_mapped</a><a href="#tymethod.protect">protect</a><a href="#tymethod.quarantine_address_range">quarantine_address_range</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class="location"><a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">util</a>::<wbr><a href="../../index.html">heap</a>::<wbr><a href="../index.html">layout</a>::<wbr><a href="index.html">mmapper</a></p><div id="sidebar-vars" data-name="Mmapper" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../../../../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../../../../settings.html"><img src="../../../../../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Trait <a href="../../../../index.html">mmtk</a>::<wbr><a href="../../../index.html">util</a>::<wbr><a href="../../index.html">heap</a>::<wbr><a href="../index.html">layout</a>::<wbr><a href="index.html">mmapper</a>::<wbr><a class="trait" href="">Mmapper</a><button id="copy-path" onclick="copy_path(this)"><img src="../../../../../clipboard.svg" width="19" height="18" alt="Copy item import"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#8-60" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust trait">pub trait Mmapper {
    fn <a href="#tymethod.eagerly_mmap_all_spaces" class="fnname">eagerly_mmap_all_spaces</a>(&amp;self, space_map: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>);
<div class="item-spacer"></div>    fn <a href="#tymethod.mark_as_mapped" class="fnname">mark_as_mapped</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, bytes: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>);
<div class="item-spacer"></div>    fn <a href="#tymethod.quarantine_address_range" class="fnname">quarantine_address_range</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.ensure_mapped" class="fnname">ensure_mapped</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.is_mapped_address" class="fnname">is_mapped_address</a>(&amp;self, addr: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.protect" class="fnname">protect</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>);
}</pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Generic mmap and protection functionality</p>
</div></details><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><h3 id="tymethod.eagerly_mmap_all_spaces" class="method"><code>fn <a href="#tymethod.eagerly_mmap_all_spaces" class="fnname">eagerly_mmap_all_spaces</a>(&amp;self, space_map: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>)</code><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#15" title="goto source code">[src]</a></h3><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Given an address array describing the regions of virtual memory to be used
by MMTk, demand zero map all of them if they are not already mapped.</p>
<p>Arguments:</p>
<ul>
<li><code>spaceMap</code>: An address array containing a pairs of start and end
addresses for each of the regions to be mapped</li>
</ul>
</div></details><h3 id="tymethod.mark_as_mapped" class="method"><code>fn <a href="#tymethod.mark_as_mapped" class="fnname">mark_as_mapped</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, bytes: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</code><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#24" title="goto source code">[src]</a></h3><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Mark a number of pages as mapped, without making any
request to the operating system.  Used to mark pages
that the VM has already mapped.</p>
<p>Arguments:</p>
<ul>
<li><code>start</code>: Address of the first page to be mapped</li>
<li><code>bytes</code>: Number of bytes to ensure mapped</li>
</ul>
</div></details><h3 id="tymethod.quarantine_address_range" class="method"><code>fn <a href="#tymethod.quarantine_address_range" class="fnname">quarantine_address_range</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#33" title="goto source code">[src]</a></h3><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Quarantine/reserve address range. We mmap from the OS with no reserve and with PROT_NONE,
which should be little overhead. This ensures that we can reserve certain address range that
we can use if needed. Quarantined memory needs to be mapped before it can be used.</p>
<p>Arguments:</p>
<ul>
<li><code>start</code>: Address of the first page to be quarantined</li>
<li><code>bytes</code>: Number of bytes to quarantine from the start</li>
</ul>
</div></details><h3 id="tymethod.ensure_mapped" class="method"><code>fn <a href="#tymethod.ensure_mapped" class="fnname">ensure_mapped</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#45" title="goto source code">[src]</a></h3><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Ensure that a range of pages is mmapped (or equivalent).  If the
pages are not yet mapped, demand-zero map them. Note that mapping
occurs at chunk granularity, not page granularity.<p></p>
<p>Argumetns:
<code>start</code>: The start of the range to be mapped.
<code>pages</code>: The size of the range to be mapped, in pages</p>
</div></details><h3 id="tymethod.is_mapped_address" class="method"><code>fn <a href="#tymethod.is_mapped_address" class="fnname">is_mapped_address</a>(&amp;self, addr: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#52" title="goto source code">[src]</a></h3><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Is the page pointed to by this address mapped? Returns true if
the page at the given address is mapped.</p>
<p>Arguments:</p>
<ul>
<li><code>addr</code>: Address in question</li>
</ul>
</div></details><h3 id="tymethod.protect" class="method"><code>fn <a href="#tymethod.protect" class="fnname">protect</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</code><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/mmapper.rs.html#59" title="goto source code">[src]</a></h3><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Mark a number of pages as inaccessible.</p>
<p>Arguments:</p>
<ul>
<li><code>start</code>: Address of the first page to be protected</li>
<li><code>pages</code>: Number of pages to be protected</li>
</ul>
</div></details></div><span class="loading-content">Loading content...</span><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><details class="rustdoc-toggle implementors-toggle" open><summary><h3 id="impl-Mmapper" class="impl"><code class="in-band">impl <a class="trait" href="trait.Mmapper.html" title="trait mmtk::util::heap::layout::mmapper::Mmapper">Mmapper</a> for <a class="struct" href="../fragmented_mapper/struct.FragmentedMapper.html" title="struct mmtk::util::heap::layout::fragmented_mapper::FragmentedMapper">FragmentedMapper</a></code><a href="#impl-Mmapper" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#59-192" title="goto source code">[src]</a></h3></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><h4 id="method.is_mapped_address" class="method trait-impl"><code>fn <a href="#tymethod.is_mapped_address" class="fnname">is_mapped_address</a>(&amp;self, addr: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code><a href="#method.is_mapped_address" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#156-165" title="goto source code">[src]</a></h4></summary><div class="docblock"><p>Return {@code true} if the given address has been mmapped</p>
<p>@param addr The address in question.
@return {@code true} if the given address has been mmapped</p>
</div></details><details class="undocumented"><summary></summary><h4 id="method.eagerly_mmap_all_spaces" class="method trait-impl"><code>fn <a href="#tymethod.eagerly_mmap_all_spaces" class="fnname">eagerly_mmap_all_spaces</a>(&amp;self, _space_map: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>)</code><a href="#method.eagerly_mmap_all_spaces" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#60" title="goto source code">[src]</a></h4><h4 id="method.mark_as_mapped" class="method trait-impl"><code>fn <a href="#tymethod.mark_as_mapped" class="fnname">mark_as_mapped</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, bytes: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</code><a href="#method.mark_as_mapped" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#62-81" title="goto source code">[src]</a></h4><h4 id="method.quarantine_address_range" class="method trait-impl"><code>fn <a href="#tymethod.quarantine_address_range" class="fnname">quarantine_address_range</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a href="#method.quarantine_address_range" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#83-113" title="goto source code">[src]</a></h4><h4 id="method.ensure_mapped" class="method trait-impl"><code>fn <a href="#tymethod.ensure_mapped" class="fnname">ensure_mapped</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code><a href="#method.ensure_mapped" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#115-148" title="goto source code">[src]</a></h4><h4 id="method.protect" class="method trait-impl"><code>fn <a href="#tymethod.protect" class="fnname">protect</a>(&amp;self, start: <a class="struct" href="../../../address/struct.Address.html" title="struct mmtk::util::address::Address">Address</a>, pages: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</code><a href="#method.protect" class="anchor"></a><a class="srclink" href="../../../../../src/mmtk/util/heap/layout/fragmented_mapper.rs.html#167-191" title="goto source code">[src]</a></h4></div></details></details></div><span class="loading-content">Loading content...</span><script type="text/javascript" src="../../../../../implementors/mmtk/util/heap/layout/mmapper/trait.Mmapper.js" async></script></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../../../" data-current-crate="mmtk" data-search-index-js="../../../../../search-index.js" data-search-js="../../../../../search.js"></div>
    <script src="../../../../../main.js"></script></body></html>